# 02 일반적인 시스템 설계 면접 흐름

- QPS, P99 같은 기능적 요구사항과 비기능적 요구사항 구분
- 모든 것은 트레이드오프
- 면접을 주도
- 시간
- 로깅, 모니터링, 경보
- 디버깅, 복잡성, 보안
- 전체 시스템과 모든 구성 요소의 성능 저하와 실패 고려
- 시스템 다이어그램, 순서도, 시퀀스 작성
- 시스템 향상 논의

## 2.1 요구사항 명확화와 트레이드오프 논의

면접 중 가장 먼저 체크해야 할 항목은 질문의 요구사항을 명확히 파악하는 것이다.  

필요한 것은 비판적 사고, 세부 사항에 대한 관심, 겸손함, 배우고자 하는 의지를 보여주는 것이다.  

## 2.2 API 명세 초안 작성

엔드포인트를 작성하기 전에 미리 기능적 요구사항을 명확히 해야한다.  

### 2.2.1 공통 API 엔드포인트

#### 상태 확인

GET /health

#### 회원가입과 로그인(인증)

#### 사용자와 콘텐츠 관리


## 2.3 사용자와 데이터 간의 연결과 처리

사용자와 데이터 간의 연결을 나타내고 다양한 시스템 구성 요소와 그 사이에서 발생하는 데이터 처리를 설명하는 다이어그램을 그릴 수 있다.  

## 2.4 데이터 모델 설계

데이터 모델을 처음부터 설계할지, 아니면 기존 데이터베이스를 사용할지 논의해야 한다.  

### 2.4.1 데이터베이스를 공유하는 여러 서비스의 단점의 예

주문 팀이 낮은 쓰기 지연 시간을 활용학 ㅣ위해 주문 테이블을 카산드라로 이동하고, 지표 서비스는 단순성과 낮은 쓰기 빈도 때문에 계속 SQL을 사용하려고 한다면 서비스는 더 이상 같은 데이터베이스를 공유할 수 없다.  

### 2.4.2 동시 사용자 업데이트 충돌을 방지하는 기법

SQL 테이블에 'unix_locked'라는 타임스탬프 열을 추가할 수 있다.  


## 2.5 로깅, 모니터링, 경보

### 2.5.1 모니터링의 중요성

### 2.5.2 관찰 가능성

- 지연 시간
- 트래픽
- 오류
- 포화

조용한 실패를 해결하는 방법도 논의해야 한다.  
4xx나 5xx여야 하는데, 2xx로 표시되거나 서비스에 로깅과 모니터링 개선이 필요함을 나타내는 것일 수 있다.  

### 2.5.3 경보 대응

온콜 엔지니어가 특정 경보의 원인을 잘 알지 못 할 수 있으므로 경보 목록, 발생 가능한 원인, 원인을 찾고 해결하는 절차가 포함된 런북을 준비해야 한다.  
자동화된 실패 복구를 구현하지 않는 것은 런북 남용이다.  

장애가 해결된 후에는 무엇이 잘못됐는지, 왜 그랬는지, 팀이 어떻게 재발을 방지할 것인지를 식별하는 사후 분석을 작성해야 한다.  

### 2.5.4 애플리케이션 수준 로깅 툴

- 프로메테우스 + 그라파나
- 센수
- 나기오스
- 자비스
- 스플렁크
- 데이터독
- 뉴렐릭

### 2.5.5 데이터 품질에 대한 스트리밍과 배치 검사

### 2.5.6 데이터 이상 탐지

### 2.5.7 무감지 오류와 감사

### 2.5.8 관찰 가능성 추가 자료


## 2.6 검색창





