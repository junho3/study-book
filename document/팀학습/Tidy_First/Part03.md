# Part 03. 이론

이론만으로는 설득할 수 없습니다.  
이론을 이해하면 최적의 응용이 가능합니다.  

- 언제 소프트웨어 설계 결정을 시작해야 하는가?
- 언제 소프트웨어 설계 결정을 중단하고 시스템의 동작을 변경해야 하는가?
- 다음 결정은 어떻게 내릴 것인가?

이러한 질문은 당장 합리적이고 논리적으로 답할 수 없습니다.  
그 시점에는 합리적이고 논리적인 답을 찾는 데 필요한 정보가 존재하지 않기 때문입니다.  

이론을 이해하면, 이러한 질문에 추측으로 답해야 할 때를 대비해 판단력을 키울 수 있습니다.  

모두 같은 목표를 달성하려고 하지만 서로 방법이 다를 뿐입니다.  
이론은 이러한 견해 차이가 더 깊어질 때 도움이 됩니다.  
서로 다른 목표를 달성하려고 할 때에도 이론적인 틀을 공유하는 것이 유용합니다.  

원칙에 동의하지 않더라도 서로의 원칙에 대해 논의할 수 있다면 더 빨리 합의할 수 있는 기회가 생깁니다.  
또한 서로에게서 배울 수 있는 기회도 있습니다.  

우리는 '소프트웨어 설계는 인간관계 속에서 벌어지는 활동'이라는 말로 이 모든 여정을 시작했습니다.  
이 책은 주로 자신과의 관계에 초점을 맞추고 있습니다.  


## Chapter 22. 요소들을 유익하게 관계 맺는 일

제가 어떤 내용을 설계라고 하는지 앞에서 예를 보셨을 겁니다.  
지금까지 개별적인 결정이 함께 이어져서 더 큰 목표를 달성하는 모습도 보셨을 것입니다.  
이제는 '소프트웨어 설계의 의미'에 대해 '요소들을 유익하게 관계 맺는 일'이라고 말할 수 있습니다.  

### 요소

- 프로그래밍 세계에서는, 토큰 > 식 > 문 > 함수 > 객체/모듈 > 시스템

요소에는 경계가 있습니다.  
그래서 어디서 시작하고 끝나는지 알 수 있습니다.  

또한 요소는 하위 요소를 포함합니다.  

### 관계 맺기

소프트웨어 설계에서 관계는 다음과 같은 것들이 있습니다.  
- 호출
- 발행
- 대기
- 참조

### 유익하게

하나의 설계 작업은 작은 하위 요소로 만든 거대한 수프를 만다는 일과 같은 것입니다.  

전역 네임스페이스를 사용한 어셈블리 언어를 생각해 보세요.  
잘 설계된 프로그램과 똑같이 동작하겠죠.  
하지만, 빠르게 변경할 수는 없을 것입니다.  
요소들 사이에는 분명 존재하지만, 잘 드러나지 않는 관계가 너무 많기 때문입니다.  

설계할 때, 기계를 위한 명령어가 아닌, 일종의 중간 요소를 만들면, 그 중간 요소들이 서로에게 도움이 되기 시작합니다.  

### 요소들을 유익하게 관계 맺는 일

```
caller()  
  return box.width() * box.height()

caller ()
  return box.area()
Box>>area()
  return width() * height()
```
설계 관점에서 Box.area()라는 새로운 요소를 만들고 caller() 함수와 box 객체 사이의 관계를 조정했습니다.  

- 요소 계층 구조
- 요소 사이의 관계
- 이러한 관계가 만들어내는 이점

이제 시스템의 구조와 동작을 좀 더 명확하게 구분할 때입니다.  


## Chapter 23. 구조와 동작

소프트웨어는 두 가지 방식으로 가치를 만듭니다.  

- 현재 소프트웨어가 하는 일
- 미래에 새로운 일을 시킬 수 있는 가능성

동작을 규정하는 방식은 다음 두 가지 입니다.  

### 입출력 쌍

### 불변 조건

소프트웨어를 실행하는데 1달러의 전기료가 들고, 사람들이 이용할 때 10달러를 청구할 수 있다면 비즈니스가 성립하는 것입니다.  

흔히 컴퓨터의 성능이 영원히 유지될 거라고 생각하지만, 모든 것은 늘 변하기 마련입니다.  

어떻게 하면 더 나은 기계에 도달할 수 있을까요?  
그 방법을 한마디로 말하면, 선택 가능성입니다.  
특정 방식으로 동작하는 시스템이 있다는 것만으로도, 시스템이 어떻게 동작해야 하는지에 대한 욕구가 달라집니다.  

시스템을 더 가치 있게 만들기 위해서 굳이 시스템의 동작을 바꿀 필요가 없었습니다.
```
Chat gpt
시스템의 기능이나 성능을 변화시키지 않더라도, 시스템 자체의 관리나 운영 방식 등을 통해 가치를 높일 수 있다는 뜻입니다.  
```

다음에 무엇을 할 수 있는지에 대해 선택할 수 있는 기회를 만들자마자, 저는 이미 돈을 번 것입니다.
```
Chat gpt
사용자가 다양한 선택을 할 수 있도록 시스템을 설계하거나 운영하면, 이는 곧 수익으로 이어질 수 있다는 것을 강조합니다.  

종합적으로, 이 문장들은 시스템의 동작을 직접 변경하지 않더라도, 시스템을 더 유연하고 사용자가 다양한 선택을 할 수 있게 만들어서 가치를 높일 수 있다는 의미를 전달합니다.  
이는 시스템 개선의 또 다른 측면을 강조하며, 사용자의 선택권을 확장하는 것만으로도 경제적 가치를 창출할 수 있다는 통찰을 제공합니다.  
```

옵션은 소프트웨어로 만들어내는 경제적인 마법이며, 주로 확장할 기회를 만듭니다.  
```
Chat gpt
이 전체 문장은 소프트웨어의 확장성과 유연성, 그리고 적은 추가 노력으로도 큰 규모의 작업을 처리할 수 있는 능력을 강조하는 것입니다.  
소프트웨어는 물리적인 제품과 달리 쉽게 확장하고 더 많은 작업을 처리할 수 있는 잠재력이 큽니다.  
```

옵션의 가장 멋진 점 중 하나는 환경의 변동성이 클수록 옵션의 가치가 더 커진다는 것입니다.  
하지만 옵션을 통해 선택 가능성을 늘리는 방법을 배우고 나서는 혼란이 기회가 되었습니다.  

변경에 따른 비용도 치솟습니다.  
하루에 한 가지 선택을 내릴 수 없고, 한 달에 한 번 선택의 기회가 주어질 수 있습니다.  
선택 가능성이 줄어들면 소프트웨어가 만드는 가치도 줄어듭니다.  

**구조는 미래의 기회를 만듭니다.**  
**구조에 따라 급여 계산에 새로운 국가를 추가하는 것이 쉬워질 수도 있고, 어려워질 수도 있습니다.**  

문제는 구조가 동작처럼 또렷하게 드러나지 않는다는 사실입니다.  

선택 가능성을 유지하고 확장하기 위해 구조에 투자해야 한다는 것을 알고 있다고 해도, 실제로 투자했는지 여부는 알 수 없습니다.  

구조 변경과 동작 변경은 모두 가치를 만들어내지만, 근본적으로 다르다는 것을 이해하는 것부터 시작하세요.  
한 마디로 말하면 되돌릴 수 있는 능력 즉, 가역성입니다.  

> 초반에는 무슨 내용인지 이해하지 못 했다가 후반에서 말하고자 하는 주제를 이해함  
> "구조는 미래의 기회를 만듭니다." 이 문장이 이번 장의 핵심  
> 초반에 얘기하는 '옵션'은 '구조를 통한 미래의 기회 창출'이라고 이해 함  
> 
> 구조에 대한 투자를 검증하는 방법은 두 가지가 생각 남  
> 1. 팀 차원에서 현재 구조의 문제를 공유하고, 개선 방향을 고민하는 자리 만들기
> 2. 코드를 작성하기 전에 클래스 설계도를 그리면서 올바른 구조인지 판단하기


## Chapter 24. 경제 이론: 시간 가치와 선택 가능성

돈의 본성과 더불어 우리가 하는 일의 중심에 돈이 있기 때문에 긴장이 형성됩니다.  
프로그래머로서 우리가 하는 일이 돈의 본성과 상반될 수도 있습니다.  
그러나 괴짜의 욕망과 돈의 명령이 충돌하면, 결국 돈이 승리하더군요.  

지금 돈을 벌려면 미래의 옵션이 줄어들 수 있습니다.  
하지만 지금 돈을 벌지 못하면 미래의 옵션을 행사할 여력이 없을 수도 있습니다.  

소프트웨어 설계는 '먼저 벌고 나중에 써야 한다'와 '물건이 아닌 옵션을 만들어야 한다'는 두 가지 속성을 조화시켜야 합니다.  

> 확장성 vs YAGNI  
> 최소한 SRP라도 지키면서 도메인 지식 범위 내에서 예상 가능한 확장성을 고려하는 것을 선호함  
>
> 현재와 미래의 간극에서 발생하는 기술부채르 어떻게 해결하면 좋을지?  
> - 분기마다 기술부채 에픽을 만들고 관리 중  
> - 큰 작업 이후에 일주일정도 기술부채 청산 기간을 갖기로 함 (현재 조직에서는 큰 작업이 거의 없어서 잘 운영되진 않음)


## Chapter 25. 오늘의 1달러가 내일의 1달러보다 크다

돈에 대해서라면, 다음 두 가지에 달렸습니다.  
- 시점
- 확실성

내일 1달러를 약속하면, 오늘 주는 1달러보다 가치가 떨어집니다.  

경제 문제에 대해 '향후 10년 동안'을 따지는 일은 '우주의 종말 시점'을 말하는 것과 같습니다.  

좋은 투자처럼 보이지만 10년 동안 계속 긴장 속에 있어야 할 것 같기 때문입니다.  
후자의 거래는 그다지 생각이 필요하지 않습니다.  

이 책의 범위에서 돈의 시간 가치는 코드 정리를 먼저 하기보다는 나중에 하는 것을 권장합니다.  
지금 당장 돈을 벌고 나중에 코드를 정리하는 행동 변화를 실천할 수 있다면 점차 먼저 돈을 벌고 나중에 돈을 쓸 수 있을 것입니다.  

> 스타트업이라면 맞는 말이라고 생각함  
> 코드 정리보다 새로운 기능을 빠르게 출시하여 수익 모델을 만들어야하기 때문  
> 하지만 회사가 성장함에 따라, 기술 부채들이 발목을 잡을 것  
> 보통 기존 개발자는 퇴사하고, 새로운 개발자들이 합류하여 새로운 시스템을 만드는 듯  
>
> 킥고잉 CTO가 메인 언어를 PHP로 선택한 이유라고 생각 됨  


