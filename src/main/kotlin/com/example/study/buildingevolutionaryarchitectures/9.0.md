# CHAPTER 9 아키텍처 실천

## 9.1 조직적 요인

### 9.1.1 콘웨이의 법칙

사회적 구조, 사람들 사이의 의사소통 경로가 최종 제품 설계에 필연적으로 영향을 미친다는 개념을 제시했다.  

콘웨이에 따르면 하나의 큰 문제를 작게 나누어 위임하면 각각을 조정하는 문제가 다시 발생한다.  
계층 아키텍처는 사용자 인터페이스, 비즈니스 로직 등의 기술적 기능을 기준으로 계층을 나눈다.  
그러나 이 구조에서 여러 계층을 수직으로 관통하는 공통 요건을 처리하면 오히려 조정 오버헤드가 증가한다.  

콘웨이는 소프트웨어 아키텍트가 아키텍처 설계 이외의 측면에 주의를 기울여야 한다고 강조하고 있다.  
위임, 할당, 팀 간 조정 등의 사안은 설계만큼이나 아키텍트에게 중요하다.  

콘웨이가 지적한 대로 위임 영역이 분할되고 담당 범위가 좁아질 때마다 효과적인 설계 대안은 줄어든다.  
바꿔 말하면, 누군가가 소유하고 있는 대상은 타인이 변경하기 매우 어렵다.  
그러므로, 소프트웨어 아키텍트는 작업을 분할하는 방식과 위임 범위를 항상 고민하고, 아키텍처의 목표와 팀 구조를 일치시키기 위해 노력해야 한다.  

마이크로서비스 아키텍처를 구축하는 회사는 대부분 기술적인 기준보다 서비스 경계를 기준으로 팀을 구성한다.  

도메인을 중심으로 구성된 팀은 기술 중심 팀보다 진화적 아키텍처를 구현하기 유리하다.  

> 안타깝지만 기존 조직 구성을 갈아엎는건 CEO급이 아니면 불가능하다고 생각 함  

#### 교차기능팀

도메인 중심 팀은 교차기능팀인 경우가 많다.  
즉, 한 팀의 구성원만으로 제품의 모든 영역을 아우를 수 있다.  
서비스 설계, 구현, 배포 등의 모든 역할을 하나의 팀이 담당하며, 운영처럼 전통적으로 분리되어 있던 역할까지 포괄한다.  

교차기능팀의 다양한 역할
- 아키텍처: 아키텍처는 증분 변경을 방해하는 부적절한 커플링을 제거해야 한다.  
- 비즈니스 분석가: 도메인 영역의 복잡도가 높은 제품은 비즈니스 규칙, 설정, 제품 이력 등의 특성도 복잡하다.  
- 데이터 
- 개발자: 개발자는 기존에 자신의 분야가 아니었던 작업도 처리할 수 있어야 한다.  
- 디자이너
- 운영
- 제품 관리자(PM)
- 테스트

교차기능팀의 목표 중 하나는 팀 조정 과정에서 발생하는 마찰을 근절하는 것이다.


##### 아마존의 피자 두 판 팀


#### 비즈니스 기능 중심 팀 구성

도메인을 중심으로 팀을 구성한다는 것은 비즈니스 기능을 중심으로 팀이 구성될 것임을 암시한다.  


#### 비즈니스 기능과 인지 부하의 균형

- 스트림 정렬팀: 비즈니스 도메인의 작업 흐름과 일치하는 팀
- 활성화팀: 새로운 기술/기법을 습득하도록 지원하는 팀
- 난해한 하위시스템팀: 비즈니스 도메인 중 수학/계산/기술 분야 담당
- 플랫폼팀: 스트림 정렬팀의 업무 속도를 가속시키기 위해 강력한 내부 도구를 생산하고 지원하는 팀  

팀을 설계할 때는 인지 부하를 반드시 함께 고려해야 한다.  


#### 프로젝트를 넘어 제품으로

> 카카오페이손해보험에 합류한 초반에는 드릴다운팀이 있었음  
> 비즈니스 개발을 위해 필요한 주제를 관심있는 사람 2~3명이 지원하여 POC를 담당  
> 취지는 좋지만 본업과 부업 사이에서 리소스 관리가 어렵고, 최종적으로 서비스를 인수인계 받는 팀에게는 낯선 개발(코드) 결과물을 받아야하는 문제가 있었음

따라서 개발자는 품질 지표에 주인의식을 느끼며 제품의 결함에 더욱 많은 관심을 기울인다.  

> 아직 팀을 리딩해본 경험은 없지만, 반드시 팀원이 하나의 서비스를 담당하는 분위기를 만들고자했음  
> 그것이 명목상일지라도 배포관리, 모니터링, 코드개선처럼 서비스에 대해 주인의식을 갖도록 하기 위함  


#### 과도한 팀 규모 지양

문제는 사람의 수가 아니라 사람들이 만들어내는 연결의 수다.  
폭증하는 의사소통 경로를 제한하려면 팀을 축소해야 하며, 축소된 팀은 교차기능팀이어야 한다.  


#### 팀 커플링 특성



