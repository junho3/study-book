# 13 콘텐츠 배포 네트워크 설계하기

## 13.1 CDN의 장점

### 13.1.1 CDN 사용의 장점

- 낮은 지연 시간
  - 낮은 지연 시간은 SEO (검색 엔진 최적화) 개선 가능
  - 여러 데이터 센터 모니터링의 복잡성
- 확장성
- 낮은 단위 비용
- 높은 처리량
  - 많은 사용자와 높은 부하를 처리할수록 비용 감소
- 높은 가용성
  - 자사 서비스의 호스트가 실패할 때 대체 수단으로 적용 가능
  - 트래픽 급증 시 다른 데이터 센터로 리다이렉션 가능


### 13.1.2 CDN 사용의 단점

- 복잡성
  - 추가적인 DNS 조회
  - 추가적인 실패 지점
- 트래픽이 적을 경우 높은 비용
- 다른 CDN으로 마이그레이션 어려움
  - 특정 지역의 서비스 미제공
  - 폐업
  - 낮은 퀄리티
- 일부 국가나 조직이 특정 CDN IP 차단 가능성
- 보안과 프라이버시 문제


### 13.1.3 이미지 제공 CDN을 사용할 때 발생할 수 있는 예상치 못한 문제의 예

CDN은 GET 요청의 User-Agent 헤더를 읽어 요청이 웹 브라우저에서 온 것인지 확인하고, 업로드 된 PNG나 JPEG 대신 WebP 이미지를 반환할 수 있다.  
일부 서비스에서는 이상적일 수 있지만, 원본 형식으로 이미지를 반환받고자 하는 다른 브라우저 애플리케이션에서는 세 가지 선택지가 있다.  

> WebP 단점 (GPT 답변)
> - 오래된 브라우저의 미지원
> - 구형 기기에서 WebP 디코딩 진행 시 높은 CPU 연산과 베터리 소모를 요구하게 됨
> - 낮은 투명도 품질


1. 웹 애플리케이션에서 User-Agent 헤더 재정의
2. 서비스별로 서로 다른 이미지를 제공하도록 CDN 구성
3. 백엔드 서비스를 통한 라우팅




