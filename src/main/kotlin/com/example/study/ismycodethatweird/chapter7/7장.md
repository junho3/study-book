# 7장 컬렉션: 중첩을 제거하는 구조화 테크닉

## 7.1 이미 존재하는 기능을 다시 구현하지 말기

```
var isBanana = false
for (item in items) {
    if (item == "바나나") {
        isBanana = true
        break
    }
}

val isBanana = items.any { it == "바나나" }
```

반복문을 사용해 컬렉션을 직접 조작하고 있다면, 잠시 멈추고 표준 라이브러리에 같은 기능을 하는 메서드가 있는지 확인해라.  

바퀴의 재발명

> 코틀린에는 왠만한 함수들은 구현되어 있는 듯  
> 직접 구현하기 전에 검색을 통해서 이미 존재하는지 확인 함  

## 7.2 반복 처리 내부의 조건 분기 중첩

### 7.2.1 조기 컨티뉴로 조건 분기 중첩 제거하기

반복문 내부에 있는 조건 분기 중첩은 조기 리턴을 응용한 조기 컨티뉴로 해결할 수 있다.  
'조건을 만족하지 않는 경우, continue로 다음 반복으로 넘어간다'라는 기법을 활용하는 것이다.

### 7.2.2 조기 브레이크로 중첩 제거하기

조기 브레이크를 사용하면 로직이 단순해지는 경우가 많다.


## 7.3 응집도가 낮은 컬렉션 처리

컬렉션과 관련된 작업을 처리하는 코드가 여기저기에 구현될 가능성이 굉장히 높다.  

### 7.3.1 컬렉션 처리를 캡슐화하기

컬렉션과 관련된 응집도가 낮아지는 문제는 일급 컬렉션 패턴을 사용해 해결할 수 있다.  
일급 컬렉션이란 컬렉션과 관련된 로직을 캡슐화하는 디자인 패턴이다.  

일급 컬렉션의 구성 요소
- 컬렉션 자료형의 인스턴스 변수
- 컬렉션 자료형의 인스턴스 변수에 잘못된 값이 할당되지 않게 막고, 정상적으로 조작하는 메서드

> Code_7_14.kt 참고

### 7.3.2 외부로 전달할 때 컬렉션의 변경 막기

```
List<Member> members() {
  return members.unmodifiableList();
}
```

> 코틀린은 List(불변)와 MutableList(가변)가 각각 존재함  
> 백킹프로퍼티를 사용하여 클래스의 프로퍼티는 private MutableList로 정의하고, public 메서드를 통해 List타입으로 내려줌  
>
> 코틀린에는 unmodifiableList()는 없는 듯  
>
> 코틀린이 불완전한 해결 방법을 사용하는 이유  
> 극단적 실용주의 언어이기 때문이다.  
> 약간의 불완전성을 포용함으로써, 얻는 이익이 훨신 크기 때문이다.  
> 자바와의 상호 운용성을 가져가며, 적당한 범위 내에서 안전하다.  
> 출처: https://jake-seo-dev.tistory.com/311 [제이크서 위키 블로그:티스토리]  

