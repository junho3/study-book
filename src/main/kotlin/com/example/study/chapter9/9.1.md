# 9.1 가정을 주의하라

코드 작성 시 가정을 하기 전에 그 가정으로 초래될 비용과 이점을 생각해봐야 한다.  
코드 단순화 또는 효율성의 명백한 이득이 미미하다면 늘어난 취약성으로 인한 비용이 장점을 능가하기 때문에 가정을 하지 않는 것이 최선일 수 있다.  

## 9.1.1 가정은 코드 재사용 시 버그를 초래할 수 있다

## 9.1.2 해결책: 불필요한 가정을 피하라

섣부른 최적화를 피하려는 열망은 소프트웨어 공학과 컴퓨터 과학 내에서 잘 정립된 개념이다.  
코드 최적화는 일반적으로 비용이 든다.  
즉, 최적화된 해결책을 구현하는 데 더 많은 시간과 노력이 필요하며 그 결과 코드는 종종 가독성이 떨어지고, 유지 관리가 더 어려워지며, 가정을 하게 되면 견고함이 떨어질 가능성이 있다.  
따라서 대부분의 경우에는 큰 효과 없는 코드 최적화를 하느라고 애쓰기보다는 코드를 읽을 수 있고, 유지보수 가능하며, 견고하게 만드는 데 집중하는 것이 좋다.  

> 도메인 영역에 따라 의견이 갈릴 수 있다고 생각함  
> 대량의 데이터를 처리하는 개발자는 공감하지 못 할 것 같음  
> 하지만 최근에 머신의 성능이 많이 향상 되었고, 대안들도 등장하고 있어서 위 의견에 동의하는 편임  
> 
> 첫 회사 주니어 시절에 광고 리포팅 개발을 한 적이 있음  
> 각종 광고 데이터를 조합해서 차트로 그려야 하므로 데이터의 규모가 상당했음  
> 초반에는 정상작동 했지만 데이터가 많아지면서 timeout 등이 발생함  
> 불필요한 for 문을 줄이는 등 코드 개선을 했으나, 결국 동일한 문제가 발생함  
> 결국에는 1차 가공한 섬머리 테이블을 도입하여 해결함  
> 코드를 최적화해서 해결할 수도 있지만, 다른 방법으로 해결할 수 있다면 굳이 코드 최적화는 할 필요가 없다고 생각하고, 가독성이 더 중요함  

## 9.1.3 해결책: 가정이 필요하면 강제적으로 하라

우리가 상정한 가정으로 인해 다른 개발자들이 무의식중에 곤란을 겪지 않도록 하기 위해 가정을 강제적으로 시행해야 한다.

- 가정이 '깨지지 않게' 만들라
- 오류 전달 기술을 사용하라

### 문제의 소지가 있는, 강제되지 않은 가정

> 가정을 할 경우 메소드명을 구체적으로 정의해야 함  

### 가정의 강제적 확인

> 예제 9.5 내용이 썩 마음에 들지 않지만, 가정이 다를 경우 예외를 던지는건 괜찮은 방법이라고 생각함  
