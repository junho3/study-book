# 5장 안정 해시 설계

수평적 규모 확장성을 달성하기 위해서는 요청 또는 데이터를 서버에 균등하게 나누는 것이 중요하다.  
안정 해시는 이 목표를 달성하기 위해 보편적으로 사용하는 기술이다.  

## 해시 키 재배치(refresh) 문제

서버 Index = 해시 키 % 서버 대수  

이 방법은 서버 풀의 크기가 고정되어 있을 때, 그리고 데이터 분포가 균등할 때는 잘 동작한다.  
하지만, 서버가 추가되거나 기존 서버가 삭제되면 문제가 생긴다.  

> [우아한테크세미나] 191121 우아한레디스 by 강대명님 https://youtu.be/mPB2CZiAkKM  
> Redis 해싱 설명 영상

## 안정 해시

안정 해시는 테이블 크기가 조정될 때 평균적으로 오직 키의 개수 / 슬록의 개수 개의 키만 재배치하는 해시 기술이다.  

### 기본 구현법의 두 가지 문제

서버가 추가 / 삭제 됨에 따라 서버별로 할당 받는 해시 공간의 차이가 생김  

### 가상 노드

### 재배치할 키 결정

# 마치며

안정 해시의 이점  
- 서버가 추가되거나 삭제될 때 재배치되는 키의 수가 최소화된다.  
- 데이터가 균등하게 분포되므로 수평적 규모 확장성을 달성하기 쉽다.  
- 핫스팟 키 문제를 줄인다.  
