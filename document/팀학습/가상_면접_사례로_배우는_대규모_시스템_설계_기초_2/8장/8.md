# 8장 분산 이메일 서비스

## 1단계: 문제 이해 및 설계 범위 확정

- ~~인증~~
- 이메일 발송/수신
- 모든 이메일 가져오기
- 읽음 여부에 따른 이메일 필터링
- 제목, 발신인, 메일 내용에 따른 검색 기능
- 스팸 및 바이러스 방지 기능
- SMTP, POP, IMAP 등 프로토콜 대신 HTTP만 지원하기로 가정
- 첨부 파일 지원

### 비기능 요구사항

- 안정성
  - 이메일 데이터는 소실되어서는 안 된다.
- 가용성
  - 이메일과 사용자 데이터를 여러 노드에 복제하여 가용성을 보장해야 한다.  
  - 부분적으로 장애가 발생해도 시스템은 계속 동작해야 한다.
- 확장성
  - 사용자 수가 늘어나도 감당할 수 있어야 한다.
  - 사용자나 이메일이 많아져도 시스템 성능은 저하되지 않아야 한다.
- 유연성과 확장성
  - 새 컴포넌트를 쉽게 추가하고 성능을 개선할 수 있는 유연하고 확장성 높은 시스템이어야 한다.  
  - POP나 IMAP는 기능이 매우 제한적이므로 맞춤형 프로토콜이 필요할 수도 있다.  

### 개략적인 규모 추정

- 10억 명의 사용자
- 100,000 QPS
- 한 사람당 하루 평균 10건, 이메일은 평균 50KB로 가정한다.  
- 메타 데이터는 10억 명 사용자 X 하루 40건 X 365일 X 50KB = 730PB 저장공간 필요
- 첨부 파일을 포함한 이메일의 비율은 평균 20%이며, 첨부 파일은 500KB로 가정
- 첨부 파일은 10억 명 사용자 X 하루 40건 X 365일 X 500KB = 1,460PB 저장공간 필요


## 2단계: 개략적 설계안 제시 및 동의 구하기



