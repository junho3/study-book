# 09 알림/경보 서비스 설계

공통 관심사를 중앙 집중화한다.


## 9.1 기능 요구사항

MVP 설계 연습으로 좋다.  
가능ㅇ한 기능을 예상하고 새로운 기능과 서비스를 추가하기 쉽고 느슨하게 결합된 구성 요소로 시스템을 설계해 사용자 피드백과 변화하는 비즈니스 요구사항에 대응해 발전할 수 있다.  

### 9.1.1 가동 시간 모니터링용이 아님

알림 서비스는 이메일, SMS와 같은 다양한 메시징 서비스 위에 구축된 계층일 가능성이 높다.  

가동 시간 모니터링 서비스는 모니터링하는 서비스와 독립된 인프라에서 실행돼야 한다.  


### 9.1.2 사용자와 데이터

- 발신자
- 수신자
- 관리자


### 9.1.3 수신자 채널

- 브라우저
- 이메일
- SMS
- 자동 전화 통화
- 모바일 푸시 알림
- 앱 내 맞춤형 알림


### 9.1.4 템플릿

`${first_name}님 환영합니다. 첫 구매 시 ${discount}% 할인을 즐기세요.`


### 9.1.5 트리거 조건

알림은 수동이나 프로그래밍 방식으로 트리거될 수 있다.  


### 9.1.6 구독자, 발신자 그룹, 수신자 그룹 관리

역할 기반 접근 제어(RBAC)도 고려할 수 있다.  


### 9.1.7 사용자 기능

- 중복알림 금지
- 과거 알림 요청 확인
- 많은 알림 구성과 템플릿
- 알림 상태 조회
- 우선순위 알림을 위한 가중치


### 9.1.8 분석


## 9.2 비기능적 요구사항

- 스케일
  - 매일 수십억 개의 알림
- 성능
  - 수천 명의 발신자와 10억 명의 수신자
  - 몇 초 내에 알림 전달
- 고가용성
  - 99.999% 가동 시간
- 내결함성
  - 수신자가 알림을 못 받으면 다음에 알림을 받아야 함
- 보안
  - 인증된 사용자만 알림을 보내야함
- 프라이버시
  - 수신자는 알림 수신을 거부할 수 있어야 함


